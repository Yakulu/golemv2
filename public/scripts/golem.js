'use strict';

/*
menus
window.onhashchange = ->
menus.foreach(function (m) {
m.render()
})
};
 */
var db, init;

db = golem.model.db;

db.allDocs(function(err, response) {
  if (err || response.rows.length === 0) {
    return db.bulkDocs(golem.module.contact.data.items, function(err, response) {
      var gmq, queries;
      gmq = golem.model.queries;
      queries = [gmq.all, gmq.tags, gmq.labels, gmq.members];
      return db.bulkDocs(queries, function(err, response) {
        return init();
      });
    });
  } else {
    return init();
  }
});

init = function() {
  var roots;
  golem.roots = {
    header: document.getElementById('golem-header'),
    mainMenu: document.getElementById('golem-mainmenu'),
    main: document.getElementById('golem-main'),
    footer: document.getElementById('golem-footer'),
    notifications: document.getElementById('golem-notifications')
  };
  roots = golem.roots;
  m.module(roots.header, golem.header);
  m.module(roots.footer, golem.footer);
  m.module(roots.mainMenu, golem.menus.main);
  m.module(roots.notifications, golem.notifications);
  return m.module(roots.main, golem.auth.main);
};

golem.initRouting = function() {
  var gm, roots;
  gm = golem.module;
  roots = golem.roots;
  m.route.mode = 'hash';
  return m.route(roots.main, '/', {
    '/': golem.home.main,
    '/auth': golem.auth.main,

    /*
    '/family': gm.family.component.list
    '/family/list': gm.family.component.list
    '/family/add': gm.family.component.form
    '/family/edit/:familyId': gm.family.component.form
    '/family/show/:familyId': gm.family.component.show
    '/family/remove/:familyId': gm.family.component.remove
    '/contact': gm.contact.component.list
    '/contact/list': gm.contact.component.list
    '/contact/list/page/:page': gm.contact.component.list
    '/contact/tags': gm.contact.component.tags
    '/contact/show/:contactId': gm.contact.component.show
    '/contact/add': gm.contact.component.form
    '/contact/edit/:contactId': gm.contact.component.form
    '/contact/remove/:contactId': gm.contact.component.remove
     */
    '/member': gm.member.component.list,
    '/member/list': gm.member.component.list,
    '/member/tags': gm.member.component.tags,
    '/member/skills': gm.member.component.skills,
    '/member/add': gm.member.component.form,
    '/member/edit/:memberId': gm.member.component.form,
    '/member/show/:memberId': gm.member.component.show,
    '/member/remove/:memberId': gm.member.component.remove,
    '/activity': gm.activity.component.list,
    '/activity/list': gm.activity.component.list,
    '/activity/add': gm.activity.component.form,
    '/activity/show/:activityId': gm.activity.component.show,
    '/activity/edit/:activityId': gm.activity.component.form,
    '/activity/remove/:activityId': gm.activity.component.remove
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpYy9zY3JpcHRzL2dvbGVtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLENBQUE7QUFFQTtBQUFBOzs7Ozs7O0dBRkE7QUFBQSxJQUFBLFFBQUE7O0FBQUEsRUFZQSxHQUFLLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFaakIsQ0FBQTs7QUFBQSxFQWlCRSxDQUFDLE9BQUgsQ0FBVyxTQUFDLEdBQUQsRUFBTSxRQUFOLEdBQUE7QUFDVCxFQUFBLElBQUksR0FBQSxJQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBZCxLQUF3QixDQUFuQztXQUNFLEVBQUUsQ0FBQyxRQUFILENBQVksS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQXRDLEVBQTZDLFNBQUMsR0FBRCxFQUFNLFFBQU4sR0FBQTtBQUMzQyxVQUFBLFlBQUE7QUFBQSxNQUFBLEdBQUEsR0FBTSxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQWxCLENBQUE7QUFBQSxNQUNBLE9BQUEsR0FBVSxDQUFDLEdBQUcsQ0FBQyxHQUFMLEVBQVUsR0FBRyxDQUFDLElBQWQsRUFBb0IsR0FBRyxDQUFDLE1BQXhCLEVBQWdDLEdBQUcsQ0FBQyxPQUFwQyxDQURWLENBQUE7YUFFQSxFQUFFLENBQUMsUUFBSCxDQUFZLE9BQVosRUFBcUIsU0FBQyxHQUFELEVBQU0sUUFBTixHQUFBO2VBQW1CLElBQUEsQ0FBQSxFQUFuQjtNQUFBLENBQXJCLEVBSDJDO0lBQUEsQ0FBN0MsRUFERjtHQUFBLE1BQUE7V0FNRSxJQUFBLENBQUEsRUFORjtHQURTO0FBQUEsQ0FBWCxDQWpCQSxDQUFBOztBQUFBLElBMEJBLEdBQU8sU0FBQSxHQUFBO0FBRUwsTUFBQSxLQUFBO0FBQUEsRUFBQSxLQUFLLENBQUMsS0FBTixHQUNFO0FBQUEsSUFBQSxNQUFBLEVBQVEsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsY0FBeEIsQ0FBUjtBQUFBLElBQ0EsUUFBQSxFQUFVLFFBQVEsQ0FBQyxj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QSxFQUFnQyxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQWhDL0I7R0FBekIsRUFMa0I7QUFBQSxDQTdDcEIsQ0FBQSIsImZpbGUiOiJwdWJsaWMvc2NyaXB0cy9nb2xlbS5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG4jIyNcbm1lbnVzXG53aW5kb3cub25oYXNoY2hhbmdlID0gLT5cbm1lbnVzLmZvcmVhY2goZnVuY3Rpb24gKG0pIHtcbm0ucmVuZGVyKClcbn0pXG59O1xuIyMjXG5cbiMgRGF0YWJhc2VcbmRiID0gZ29sZW0ubW9kZWwuZGJcbiMgVE1QIERFViA6IFJlcG9wdWxhdGUgYXQgbGF1bmNoLi4uXG4jZGIuZGVzdHJveSgtPlxuICAjICBnb2xlbS5tb2RlbC5kYiA9IG5ldyBQb3VjaERCKCdnb2xlbScpXG4gICMgIGRiID0gZ29sZW0ubW9kZWwuZGJcbmRiLmFsbERvY3MgKGVyciwgcmVzcG9uc2UpIC0+XG4gIGlmICBlcnIgb3IgcmVzcG9uc2Uucm93cy5sZW5ndGggaXMgMFxuICAgIGRiLmJ1bGtEb2NzIGdvbGVtLm1vZHVsZS5jb250YWN0LmRhdGEuaXRlbXMsIChlcnIsIHJlc3BvbnNlKSAtPlxuICAgICAgZ21xID0gZ29sZW0ubW9kZWwucXVlcmllc1xuICAgICAgcXVlcmllcyA9IFtnbXEuYWxsLCBnbXEudGFncywgZ21xLmxhYmVscywgZ21xLm1lbWJlcnNdXG4gICAgICBkYi5idWxrRG9jcyBxdWVyaWVzLCAoZXJyLCByZXNwb25zZSkgLT4gaW5pdCgpXG4gIGVsc2VcbiAgICBpbml0KClcblxuaW5pdCA9IC0+XG4gICMgTGF5b3V0IG1vZHVsZXMgaW5pdGlhbGl6YXRpb25cbiAgZ29sZW0ucm9vdHMgPVxuICAgIGhlYWRlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2dvbGVtLWhlYWRlcidcbiAgICBtYWluTWVudTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2dvbGVtLW1haW5tZW51J1xuICAgICNjb250ZXh0TWVudTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvbGVtLWNvbnRleHRtZW51JylcbiAgICBtYWluOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnZ29sZW0tbWFpbidcbiAgICBmb290ZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdnb2xlbS1mb290ZXInXG4gICAgbm90aWZpY2F0aW9uczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2dvbGVtLW5vdGlmaWNhdGlvbnMnXG5cbiAgcm9vdHMgPSBnb2xlbS5yb290c1xuICBtLm1vZHVsZSByb290cy5oZWFkZXIsIGdvbGVtLmhlYWRlclxuICBtLm1vZHVsZSByb290cy5mb290ZXIsIGdvbGVtLmZvb3RlclxuICBtLm1vZHVsZSByb290cy5tYWluTWVudSwgZ29sZW0ubWVudXMubWFpblxuICBtLm1vZHVsZSByb290cy5ub3RpZmljYXRpb25zLCBnb2xlbS5ub3RpZmljYXRpb25zXG4gICNtLm1vZHVsZShyb290cy5jb250ZXh0TWVudSwgZ29sZW0uaG9tZS5jb250ZXh0KVxuICAjIFRNUCA6IEFVVEhcbiAgbS5tb2R1bGUgcm9vdHMubWFpbiwgZ29sZW0uYXV0aC5tYWluXG5cbmdvbGVtLmluaXRSb3V0aW5nID0gLT5cbiAgZ20gPSBnb2xlbS5tb2R1bGVcbiAgcm9vdHMgPSBnb2xlbS5yb290c1xuICAjIFJvdXRpbmdcbiAgbS5yb3V0ZS5tb2RlID0gJ2hhc2gnXG4gIG0ucm91dGUocm9vdHMubWFpbiwgJy8nLCB7XG4gICAgJy8nOiBnb2xlbS5ob21lLm1haW5cbiAgICAnL2F1dGgnOiBnb2xlbS5hdXRoLm1haW5cbiAgICAjIyNcbiAgICAnL2ZhbWlseSc6IGdtLmZhbWlseS5jb21wb25lbnQubGlzdFxuICAgICcvZmFtaWx5L2xpc3QnOiBnbS5mYW1pbHkuY29tcG9uZW50Lmxpc3RcbiAgICAnL2ZhbWlseS9hZGQnOiBnbS5mYW1pbHkuY29tcG9uZW50LmZvcm1cbiAgICAnL2ZhbWlseS9lZGl0LzpmYW1pbHlJZCc6IGdtLmZhbWlseS5jb21wb25lbnQuZm9ybVxuICAgICcvZmFtaWx5L3Nob3cvOmZhbWlseUlkJzogZ20uZmFtaWx5LmNvbXBvbmVudC5zaG93XG4gICAgJy9mYW1pbHkvcmVtb3ZlLzpmYW1pbHlJZCc6IGdtLmZhbWlseS5jb21wb25lbnQucmVtb3ZlXG4gICAgJy9jb250YWN0JzogZ20uY29udGFjdC5jb21wb25lbnQubGlzdFxuICAgICcvY29udGFjdC9saXN0JzogZ20uY29udGFjdC5jb21wb25lbnQubGlzdFxuICAgICcvY29udGFjdC9saXN0L3BhZ2UvOnBhZ2UnOiBnbS5jb250YWN0LmNvbXBvbmVudC5saXN0XG4gICAgJy9jb250YWN0L3RhZ3MnOiBnbS5jb250YWN0LmNvbXBvbmVudC50YWdzXG4gICAgJy9jb250YWN0L3Nob3cvOmNvbnRhY3RJZCc6IGdtLmNvbnRhY3QuY29tcG9uZW50LnNob3dcbiAgICAnL2NvbnRhY3QvYWRkJzogZ20uY29udGFjdC5jb21wb25lbnQuZm9ybVxuICAgICcvY29udGFjdC9lZGl0Lzpjb250YWN0SWQnOiBnbS5jb250YWN0LmNvbXBvbmVudC5mb3JtXG4gICAgJy9jb250YWN0L3JlbW92ZS86Y29udGFjdElkJzogZ20uY29udGFjdC5jb21wb25lbnQucmVtb3ZlXG4gICAgIyMjXG4gICAgJy9tZW1iZXInOiBnbS5tZW1iZXIuY29tcG9uZW50Lmxpc3RcbiAgICAnL21lbWJlci9saXN0JzogZ20ubWVtYmVyLmNvbXBvbmVudC5saXN0XG4gICAgJy9tZW1iZXIvdGFncyc6IGdtLm1lbWJlci5jb21wb25lbnQudGFnc1xuICAgICcvbWVtYmVyL3NraWxscyc6IGdtLm1lbWJlci5jb21wb25lbnQuc2tpbGxzXG4gICAgJy9tZW1iZXIvYWRkJzogZ20ubWVtYmVyLmNvbXBvbmVudC5mb3JtXG4gICAgJy9tZW1iZXIvZWRpdC86bWVtYmVySWQnOiBnbS5tZW1iZXIuY29tcG9uZW50LmZvcm1cbiAgICAnL21lbWJlci9zaG93LzptZW1iZXJJZCc6IGdtLm1lbWJlci5jb21wb25lbnQuc2hvd1xuICAgICcvbWVtYmVyL3JlbW92ZS86bWVtYmVySWQnOiBnbS5tZW1iZXIuY29tcG9uZW50LnJlbW92ZVxuICAgICcvYWN0aXZpdHknOiBnbS5hY3Rpdml0eS5jb21wb25lbnQubGlzdFxuICAgICcvYWN0aXZpdHkvbGlzdCc6IGdtLmFjdGl2aXR5LmNvbXBvbmVudC5saXN0XG4gICAgJy9hY3Rpdml0eS9hZGQnOiBnbS5hY3Rpdml0eS5jb21wb25lbnQuZm9ybVxuICAgICcvYWN0aXZpdHkvc2hvdy86YWN0aXZpdHlJZCc6IGdtLmFjdGl2aXR5LmNvbXBvbmVudC5zaG93XG4gICAgJy9hY3Rpdml0eS9lZGl0LzphY3Rpdml0eUlkJzogZ20uYWN0aXZpdHkuY29tcG9uZW50LmZvcm1cbiAgICAnL2FjdGl2aXR5L3JlbW92ZS86YWN0aXZpdHlJZCc6IGdtLmFjdGl2aXR5LmNvbXBvbmVudC5yZW1vdmVcbiAgfSlcbiJdfQ==